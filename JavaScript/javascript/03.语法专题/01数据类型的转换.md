## 1.概述
JavaScript 是一种动态类型语言，变量没有类型限制，可以随时赋予任意值。
```
var x = y ? 1 : 'a';
```
上面代码中，变量x到底是数值还是字符串，取决于另一个变量y的值.这意味着，x的类型没法在编译阶段就知道，必须等到运行时才能知道。
## 2.强制转换
强制转换主要指使用Number()、String()和Boolean()三个函数，手动将各种类型的值，分别转换成数字、字符串或者布尔值。
### 2.1Number()
+ 使用Number函数，可以将任意类型的值转化成数值。
+ 1.原始类型值的转换规则如下:
  + 数值：转换后还是原来的值
  + 字符串：如果可以被解析为数值，则转换为相应的数值
  如果不可以被解析为数值，返回 NaN,空字符串转为0。
  + 布尔值：true 转成 1，false 转成 0
  + undefined：转成 NaN
  + null：转成0
+ Number函数将字符串转为数值，要比parseInt函数严格很多，parseInt逐个解析字符。基本上，只要有一个字符无法转成数值，整个字符串就会被转为NaN。
+ 另外，parseInt和Number函数都会自动过滤一个字符串前导和后缀的空格。
```
parseInt('\t\v\r12.34\n') // 12
Number('\t\v\r12.34\n') // 12.34
```
+ 2.对象
+ 简单的规则是，Number方法的参数是对象时，将返回NaN，除非是包含单个数值的数组。
```
Number([5]) // 5
```
Number背后的转换规则比较复杂:
+ 第一步，调用对象自身的valueOf方法。如果返回原始类型的值，则直接对该值使用Number函数，不再进行后续步骤。
+ 第二步，如果valueOf方法返回的还是对象，则改为调用对象自身的toString方法。如果toString方法返回原始类型的值，则对该值使用Number函数，不再进行后续步骤。
+ 第三步，如果toString方法返回的是对象，就报错。

默认情况下，对象的valueOf方法返回对象本身，所以一般总是会调用toString方法，而toString方法返回对象的类型字符串（比如[object Object]）。

### 2.2String()
+ String函数可以将任意类型的值转化成字符串.
+ 1.原始类型值
  + 数值：转为相应的字符串。
  + 字符串：转换后还是原来的值。
  + 布尔值：true转为字符串"true"，false转为字符串"false"。
  + undefined：转为字符串"undefined"。
  + null：转为字符串"null"。
+ 2.对象
  + String方法的参数如果是对象，返回一个类型字符串；如果是数组，返回该数组的字符串形式。
```
String({a: 1}) // "[object Object]"
String([1, 2, 3]) // "1,2,3"
```
String方法背后的转换规则:
+ 1.先调用对象自身的toString方法。如果返回原始类型的值，则对该值使用String函数，不再进行以下步骤。
+ 2.如果toString方法返回的是对象，再调用原对象的valueOf方法。如果valueOf方法返回原始类型的值，则对该值使用String函数，不再进行以下步骤。
+ 3.如果valueOf方法返回的是对象，就报错。
### 2.3Boolean()
+ Boolean()函数可以将任意类型的值转为布尔值。
+ 它的转换规则相对简单：除了以下五个值的转换结果为false，其他的值全部为true。
  + undefined
  + null
  + 0（包含-0和+0）
  + NaN
  + ''（空字符串）
注意，所有对象（包括空对象）的转换结果都是true，甚至连false对应的布尔对象new Boolean(false)也是true。这是因为 JavaScript 语言设计的时候，出于性能的考虑。
```
Boolean(new Boolean(false)) // true
```
## 3.自动转换
+ 自动转换，它是以强制转换为基础的。
+ 遇到以下三种情况时，JavaScript 会自动转换数据类型，即转换是自动完成的，用户不可见。
  + 第一种情况，不同类型的数据互相运算。
  + 第二种情况，对非布尔值类型的数据求布尔值。
  + 第三种情况，对非数值类型的值使用一元运算符（即+和-)。
```
+ {foo: 'bar'} // NaN
- [1, 2, 3] // NaN
```
自动转换的规则是这样的：预期什么类型的值，就调用该类型的转换函数。`如果该位置即可以是字符串，也可能是数值，那么默认转为数值`(暂时没遇到，也不理解)。
```
[1]+1 //'11'
Array.prototype.valueOf=function (){return 1};
Array.prototype.toString=function(){return 2};
[9]+1   //2
```
`+ 这样理解，当出现加号（需要两个运算符），自动类型转换，执行valueOf,toString两个步骤，结果中字符串优先级高于数字。`
+ 由于自动转换具有不确定性，而且不易除错，建议在预期为布尔值、数值、字符串的地方，全部使用Boolean、Number和String函数进行显式转换。
+ 1.自动转换为字符串
  + JavaScript 遇到预期为字符串的地方，就会将非字符串的值自动转为字符串。具体规则是，先将复合类型的值转为原始类型的值，再将原始类型的值转为字符串。
  + 字符串的自动转换，主要发生在字符串的加法运算时。当一个值为字符串，另一个值为非字符串，则后者转为字符串。
+ 2.自动转换为数值
  + JavaScript 遇到预期为数值的地方，就会将参数值自动转换为数值。系统内部会自动调用Number函数。
  + 除了加法运算符（+）有可能把运算子转为字符串，其他运算符都会把运算子自动转成数值。
+ 3.自动转换为布尔值J
JavaScript 遇到预期为布尔值的地方（比如if语句的条件部分），就会将非布尔值的参数自动转换为布尔值。系统内部会自动调用Boolean函数。
